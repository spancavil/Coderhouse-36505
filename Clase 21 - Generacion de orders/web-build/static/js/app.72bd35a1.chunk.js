(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{165:function(e,t,n){"use strict";n.d(t,"a",(function(){return re}));var r=n(94),c=n(14),a=n.n(c),o=n(8),i=n.n(o),s=n(6),u=n.n(s),j=n(21),l=n.n(j),b=n(30),d=n(0),O=n(132),f=n(52),h=n(133),p=n(166),x=Object(O.a)({apiKey:"AIzaSyCPNmLKTcYtSlZJkutsl0IwZCn2pBc7urw",authDomain:"interbanking-react.firebaseapp.com",projectId:"interbanking-react",storageBucket:"interbanking-react.appspot.com",messagingSenderId:"288953224143",appId:"1:288953224143:web:3251134f1b42dbc2bf60ba"}),g=Object(b.f)(x),m=Object(f.b)(x,{persistence:Object(h.getReactNativePersistence)(p.a)}),v=n(5);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(d.createContext)(),C=function(e){var t=e.children,n=Object(d.useState)([]),r=u()(n,2),c=r[0],o=r[1],i=Object(d.useState)([]),s=u()(i,2),j=s[0],O=s[1],f=Object(d.useState)([]),h=u()(f,2),p=h[0],x=h[1];Object(d.useEffect)((function(){!function(){var e,t,n,r,c,a;l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=Object(b.g)(Object(b.b)(g,"productos")),t=Object(b.g)(Object(b.b)(g,"categories")),i.next=4,l.a.awrap(Object(b.e)(e));case 4:return n=i.sent,i.next=7,l.a.awrap(Object(b.e)(t));case 7:r=i.sent,c=[],n.forEach((function(e){var t=S({id:e.id},e.data());c.push(t)})),a=[],r.forEach((function(e){var t=S({id:e.id},e.data());a.push(t)})),o([].concat(c)),O([].concat(a));case 14:case"end":return i.stop()}}),null,null,null,Promise)}()}),[]);var m=function(e){return p.find((function(t){return t.id===e.id}))};return console.log(p),Object(v.jsx)(P.Provider,{value:{products:c,categories:j,addCart:function(e,t){var n=m(e);if(console.log(n),n){n.quantity+=t;var r=p.filter((function(e){return e.id!==n.id}));r.push(n),x(r)}else x([].concat(a()(p),[S(S({},e),{},{quantity:t})]))},cart:p,sumaTotal:function(){return p.reduce((function(e,t){return e+t.price*t.quantity}),0)},conteoItems:function(){return p.reduce((function(e,t){return e+t.quantity}),0)},removeItem:function(e){var t=p.filter((function(t){return t.id!==e}));x(t)}},children:t})},w=n(221),I=n(223),E=n(4),k=n(12),D=n(56),T=n(25),q=n(1),A="#e0aaff",N=function(){var e=Object(d.useState)(""),t=u()(e,2),n=t[0],r=t[1],c=Object(d.useState)(""),a=u()(c,2),o=a[0],i=a[1],s=Object(d.useState)(!1),j=u()(s,2),l=j[0],b=j[1];return Object(v.jsx)(q.a,{style:R.container,children:Object(v.jsxs)(q.a,{children:[Object(v.jsx)(k.a,{children:l?"Login":"Registro de usuario"}),Object(v.jsx)(D.a,{style:R.input,value:n,onChangeText:r,placeholder:"Ingrese email"}),Object(v.jsx)(D.a,{style:R.input,secureTextEntry:!0,value:o,onChangeText:i,placeholder:"Ingrese password"}),l?Object(v.jsx)(T.a,{onPress:function(){""!==n&&""!=o&&Object(f.d)(m,n,o).then((function(e){var t=e.user;console.log(t)})).catch((function(e){var t=e.code,n=e.message;console.log(t,n),r(""),i("")}))},children:Object(v.jsx)(k.a,{children:"Login"})}):Object(v.jsx)(T.a,{onPress:function(){""!==n&&""!=o&&Object(f.a)(m,n,o).then((function(e){console.log(e);e.user})).catch((function(e){var t=e.code,n=e.message;console.log(t,n),r(""),i("")}))},children:Object(v.jsx)(k.a,{children:"Sign up"})}),Object(v.jsxs)(q.a,{children:[Object(v.jsx)(k.a,{children:l?"No tienes usuario?":"Ya tienes usuario?"}),Object(v.jsx)(T.a,{onPress:function(){return b(!l)},children:Object(v.jsx)(k.a,{children:l?"sign up":"sign in"})})]})]})})},R=E.a.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:A},input:{}}),z=n(222),L=n(45),J=n(53),B=function(e){var t=e.navigation,n=Object(d.useContext)(P).categories;return Object(v.jsxs)(q.a,{children:[Object(v.jsx)(T.a,{onPress:function(){Object(f.e)(m).then((function(){})).catch((function(e){}))},children:Object(v.jsx)(k.a,{children:"Sign out"})}),Object(v.jsx)(k.a,{children:"Categories"}),0!==n.length?Object(v.jsx)(L.a,{data:n,renderItem:function(e){var n=e.item;return Object(v.jsx)(T.a,{onPress:function(){return e=n.category,void t.navigate("Products",{category:e});var e},children:Object(v.jsx)(k.a,{children:n.category})})},keyExtractor:function(e){return e.id.toString()}}):Object(v.jsx)(J.a,{size:"large",color:"blue"})]})},F=n(33),K=function(e){e.navigation;var t=e.route.params.item,n=Object(d.useContext)(P).addCart;return Object(v.jsxs)(q.a,{children:[Object(v.jsx)(k.a,{children:t.name}),Object(v.jsx)(F.a,{source:{uri:t.image},style:{height:200,width:"95%"},resizeMode:"cover"}),Object(v.jsx)(k.a,{children:t.price}),Object(v.jsx)(T.a,{onPress:function(){n(t,1)},children:Object(v.jsx)(k.a,{children:"Add to cart"})})]})},M=function(e){var t=e.navigation,n=e.route.params.category,r=Object(d.useContext)(P).products,c=Object(d.useState)([]),a=u()(c,2),o=a[0],i=a[1];Object(d.useEffect)((function(){!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.filter((function(e){return e.species===n})),i(e);case 2:case"end":return t.stop()}}),null,null,null,Promise)}()}),[n]);return Object(v.jsxs)(q.a,{children:[Object(v.jsx)(k.a,{children:"Products"}),0!==r.length?Object(v.jsx)(L.a,{data:o,renderItem:function(e){var n=e.item;return Object(v.jsx)(T.a,{onPress:function(){return function(e){t.navigate("Detail",{id:e.id,title:e.name,item:e})}(n)},children:Object(v.jsx)(k.a,{children:n.name})})},keyExtractor:function(e){return e.id.toString()}}):Object(v.jsx)(J.a,{size:"large",color:"blue"})]})},Y=function(){var e=Object(I.a)();return Object(v.jsxs)(e.Navigator,{initialRouteName:"Categories",children:[Object(v.jsx)(e.Screen,{name:"Categories",component:B,options:{title:"Categories"}}),Object(v.jsx)(e.Screen,{name:"Products",component:M,options:function(e){return{title:e.route.params.category}}}),Object(v.jsx)(e.Screen,{name:"Detail",component:K,options:function(e){return{title:e.route.params.title}}})]})},Z=n(95),$=function(e){var t=e.item,n=e.handleRemove;return Object(v.jsxs)(q.a,{children:[Object(v.jsxs)(k.a,{children:[t.name,", qty: ",t.quantity,", total: $",t.price*t.quantity]}),Object(v.jsx)(T.a,{onPress:function(){return n(t.id)},children:Object(v.jsx)(k.a,{children:"Eliminar"})})]})};E.a.create({});function Q(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(){var e=Object(d.useState)(0),t=u()(e,2),n=t[0],r=t[1],c=Object(d.useState)(!1),a=u()(c,2),o=a[0],s=a[1],j=Object(d.useState)(""),l=u()(j,2),O=l[0],f=l[1],h=Object(d.useState)(""),p=u()(h,2),x=p[0],m=p[1],y=Object(d.useState)(""),S=u()(y,2),C=S[0],w=S[1],I=Object(d.useState)(!1),E=u()(I,2),A=E[0],N=E[1],R=Object(d.useContext)(P);Object(d.useEffect)((function(){r(R.sumaTotal())}),[R.cart]);return Object(v.jsxs)(q.a,{children:[0!==R.cart.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k.a,{children:"Cart"}),Object(v.jsx)(L.a,{data:R.cart,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return Object(v.jsx)($,{item:t,handleRemove:R.removeItem})}}),Object(v.jsxs)(q.a,{children:[Object(v.jsxs)(k.a,{children:["Total: ",n.toFixed(1)]}),Object(v.jsx)(T.a,{onPress:function(){return s(!0)},children:Object(v.jsx)(k.a,{children:"Purchase"})})]})]}):Object(v.jsx)(k.a,{children:"No hay productos en el cart"}),Object(v.jsx)(Z.a,{animationType:"slide",transparent:!0,visible:o,onRequestClose:function(){s(!1)},children:Object(v.jsx)(q.a,{style:H.modalParent,children:Object(v.jsxs)(q.a,{style:H.modalContainer,children:[Object(v.jsx)(T.a,{onPress:function(){return s(!1)},children:Object(v.jsx)(k.a,{children:"X"})}),Object(v.jsx)(D.a,{placeholder:"Ingresar nombre",onChangeText:f,value:O}),Object(v.jsx)(D.a,{placeholder:"Ingresar direccion",onChangeText:m,value:x}),Object(v.jsx)(k.a,{children:"\xbfQuieres confirmar la compra?"}),Object(v.jsx)(T.a,{onPress:function(){return s(!1)},children:Object(v.jsx)(k.a,{children:"Cancelar"})}),Object(v.jsx)(T.a,{onPress:function(){if(""!==O&&""!==x){var e={buyer:{nombre:O,direccion:x},items:R.cart,total:n,createdAt:(new Date).toLocaleString()},t=Object(b.h)(g),r=[];R.cart.forEach((function(n){N(!0),Object(b.d)(Object(b.c)(g,"productos",n.id)).then((function(c){if(c.data().stock>=n.quantity?t.update(Object(b.c)(g,"productos",c.id),{stock:c.data().stock-n.quantity}):r.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:c.id},c.data())),console.log(r),0===r.length)Object(b.a)(Object(b.b)(g,"orders"),e).then((function(e){var n=e.id;t.commit().then((function(){w("Se genero la order con id:  + "+n)}))})).catch((function(e){console.log("Error: "+e.message),w("Error: "+e.message)}));else{for(var a,o="",s=Q(r);!(a=s()).done;){o+=a.value.name+" "}w("Productos fuera de stock: "+o)}N(!1)}))}))}},children:Object(v.jsx)(k.a,{children:"Confirmar"})}),A&&Object(v.jsx)(J.a,{size:"small",color:"green"}),!A&&Object(v.jsx)(k.a,{children:C})]})})})]})},H=E.a.create({modalParent:{flex:1,justifyContent:"center",alignItems:"center"},modalContainer:{height:500,width:300,backgroundColor:A}}),V=function(){var e=Object(I.a)();return Object(v.jsx)(e.Navigator,{children:Object(v.jsx)(e.Screen,{name:"Carrito",component:G,options:{title:"Cart"}})})},W=function(){return Object(v.jsx)(q.a,{children:Object(v.jsx)(k.a,{children:"Orders"})})},_=(E.a.create({}),function(){var e=Object(I.a)();return Object(v.jsx)(e.Navigator,{children:Object(v.jsx)(e.Screen,{name:"Ordenes",component:W,options:{title:"Orders"}})})}),ee=Object(z.a)(),te=function(){return Object(v.jsxs)(ee.Navigator,{screenOptions:{headerShown:!1},children:[Object(v.jsx)(ee.Screen,{name:"Shop",component:Y}),Object(v.jsx)(ee.Screen,{name:"Cart",component:V}),Object(v.jsx)(ee.Screen,{name:"Orders",component:_})]})},ne=function(){var e=Object(d.useState)(null),t=u()(e,2),n=t[0],r=t[1];Object(d.useEffect)((function(){Object(f.c)(m,(function(e){if(e){r(e);e.uid}else r(null)}))}),[]);Object(I.a)();return Object(v.jsx)(w.a,{children:n?Object(v.jsx)(te,{}):Object(v.jsx)(N,{})})};function re(){return r.a.ignoreLogs(["timer"]),Object(v.jsx)(C,{children:Object(v.jsx)(ne,{})})}},169:function(e,t,n){e.exports=n(213)}},[[169,1,2]]]);
//# sourceMappingURL=app.72bd35a1.chunk.js.map